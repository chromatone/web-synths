import{_ as N}from"./chunks/theme.BYDRZdkV.js";import{l as R,j,n as B,v as A,V as G,G as I}from"./chunks/index.BcyHjw5n.js";import{r as u,o as J,b as p,d as g,g as o,t as x,f as s,e as v,j as y,l as w,U as M,x as _,_ as O}from"./chunks/framework.DDULGoVp.js";class T{get(){return JSON.parse(localStorage.getItem("directus-data"))}set(n){localStorage.setItem("directus-data",JSON.stringify(n))}}const d=R("https://dbs.chromatone.center/").with(j({credentials:"include"})).with(B("json",{credentials:"include",storage:new T})).with(A({credentials:"include"})),c=u(),U=u(""),D=u(""),f=u({}),b=u("");let $=!1;function P(){return $||(J(async()=>{await S(),await L()}),$=!0),{access_token:b,email:U,password:D,authData:f,user:c,userDB:d,userCreate:E,userRead:L,refreshToken:S,submitLogin:q,logoutUser:z}}async function S(){try{let t=await d.refresh();b.value=t.access_token,delete t.access_token,f.value=t}catch(t){console.log(t.errors[0])}}async function q(){try{let t=await d.login(U.value,D.value);b.value=t.access_token,delete t.access_token,f.value={...t}}catch(t){console.log(t.errors[0])}}async function L(){try{return c.value=await d.request(G()),c.value.players=await d.request(I("players",{fields:["*",{synths:["*",{synths_id:["*"]}]}]})),c.value}catch(t){console.log(t)}}async function E({email:t}){}async function z(){await d.logout(),b.value="",f.value=""}const F={class:"flex flex-col gap-4 p-4"},H={class:"text-sm"},K={__name:"AuthProfile",setup(t){const{user:n}=P();return(i,a)=>(g(),p("div",F,[a[0]||(a[0]=o("div",{class:"text-xl"},"Profile",-1)),o("pre",H,x(s(n)),1)]))}},Q={key:1,class:"flex flex-col gap-2"},W={class:"font-mono text-xs"},X={class:"text-sm"},Y={class:"flex"},Z={__name:"AuthLogin",setup(t){const{userRead:n,email:i,password:a,authData:h,access_token:m,submitLogin:l,refreshToken:k,logoutUser:V}=P();return(oe,e)=>{const C=K;return s(m)?(g(),p("div",Q,[o("p",W,"."+x(s(m).split(".")[2]),1),o("pre",X,x(s(h)),1),o("div",Y,[o("button",{class:"text-xl font-bold rounded-lg p-4 border-2 border-solid dark-border-light-300 border-dark-800 shadow-lg dark-bg-dark-200",type:"submit",onClick:e[4]||(e[4]=r=>s(k)())},"Refresh"),o("button",{class:"text-xl font-bold rounded-lg p-4 border-2 border-solid dark-border-light-300 border-dark-800 shadow-lg dark-bg-dark-200",type:"submit",onClick:e[5]||(e[5]=r=>s(V)())},"Log out")]),o("button",{class:"text-xl font-bold rounded-lg p-4 border-2 border-solid dark-border-light-300 border-dark-800 shadow-lg dark-bg-dark-200",type:"submit",onClick:e[6]||(e[6]=r=>s(n)())},"Read user"),_(C)])):(g(),p("form",{key:0,class:"flex flex-col gap-4",onSubmit:e[3]||(e[3]=M((...r)=>s(l)&&s(l)(...r),["prevent"]))},[e[7]||(e[7]=o("div",{class:"text-4xl"},"Login to your account",-1)),e[8]||(e[8]=o("label",{class:"text-xl",for:"email"},"E-mail*:",-1)),v(o("input",{class:"text-lg rounded-lg p-4 border-2 border-solid dark-border-light-300 border-dark-800 shadow-inner dark-bg-dark-200",id:"email",type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>w(i)?i.value=r:null)},null,512),[[y,s(i)]]),e[9]||(e[9]=o("label",{class:"text-xl",for:"email"},"Password:",-1)),v(o("input",{class:"rounded-lg p-4 border-2 border-solid dark-border-light-300 border-dark-800 shadow-inner dark-bg-dark-200",type:"password","onUpdate:modelValue":e[1]||(e[1]=r=>w(a)?a.value=r:null)},null,512),[[y,s(a)]]),o("button",{class:"text-xl font-bold rounded-lg p-4 border-2 border-solid dark-border-light-300 border-dark-800 shadow-lg dark-bg-dark-200",type:"submit",onClick:e[2]||(e[2]=(...r)=>s(l)&&s(l)(...r))},"Sign In")],32))}}},ne=JSON.parse('{"title":"Login","description":"","frontmatter":{"title":"Login","desctiption":"Get in touch with community through contributions"},"headers":[],"relativePath":"auth/index.md","filePath":"auth/index.md","lastUpdated":1745388754000}'),ee={name:"auth/index.md"};function te(t,n,i,a,h,m){const l=Z,k=N;return g(),p("div",null,[_(l),_(k)])}const le=O(ee,[["render",te]]);export{ne as __pageData,le as default};
