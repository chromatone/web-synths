const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/virtual_pwa-register.BbsVw3cl.js","assets/chunks/framework.DDULGoVp.js"])))=>i.map(i=>d[i]);
import{u as K,r as c,a as D,c as U,w as Z,o as H,b as p,d as m,e as A,v as q,f as a,g as t,t as E,h as v,i as j,j as z,k as V,n as F,l as M,_ as Q,m as X,p as ee,q as B,s as te,x as h,y as _,T as ae,z as se,A as oe}from"./framework.DDULGoVp.js";const P=K("history"),I=/^([a-zA-Z0-9._%+-]{1,64})@[a-zA-Z0-9.-]{1,255}\.[a-zA-Z]{2,10}$/,Y=100,b=c(!1),W=c(!1),ne=c(!1),f=D("storedEmail",""),k=D("storedName",""),w=c(!1),g=c(f),T=c(k),N=U(()=>{var s;return ce((s=g.value.match(I))==null?void 0:s[1])}),le=c(""),re=c(""),ie=U(()=>G(g.value)),L=c(!1),R=c(!1);function G(s){return I.test(s)}function ce(s=""){return s.charAt(0).toUpperCase()+s.slice(1)}function de(){f.value="",k.value="",w.value=!1,b.value=!1}function J(){return L.value||(Z(b,s=>{s&&(W.value=!1)}),H(()=>{f.value&&(b.value=!0),P.token&&ue()}),L.value=!0),{searchParams:P,isAccessGranted:b,isValidEmail:ie,email:g,name:T,grantAccess:pe,isSent:w,isFormOpen:W,checkAvailability:ne,storedEmail:f,storedName:k,resetEmail:de,namePlaceholder:N,password:le,passwordPlaceholder:re,generatePassword:fe,maxLength:Y,claimInvite:me,invited:R}}async function ue(){console.log(P.token,f.value)}async function me(){var s,n,l;if(f.value&&!R.value){const i={email:f.value};try{const e=await fetch("https://dbs.chromatone.center/flows/trigger/164bb1bb-3745-423f-8239-703198dfbac5",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(i)});console.log(await(e==null?void 0:e.json()))}catch(e){console.error(e,(n=(s=e==null?void 0:e.errors)==null?void 0:s[0])==null?void 0:n.message,(l=e==null?void 0:e.response)==null?void 0:l.status)}R.value=!0}}async function pe(){var s,n,l;if(!(!g.value&&!G(g.value))&&(b.value=!0,!w.value)){w.value=!0;const i={email:g.value,name:(T.value||N.value||"").slice(0,Y)};try{f.value=g.value,k.value=T.value||N.value;const e=await fetch("https://dbs.chromatone.center/flows/trigger/51cc7591-219e-4b56-ad6d-c39a34f7cf2f",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(i)});console.log(await(e==null?void 0:e.json()))}catch(e){console.error(e,(n=(s=e==null?void 0:e.errors)==null?void 0:s[0])==null?void 0:n.message,(l=e==null?void 0:e.response)==null?void 0:l.status)}}}function fe(){return[...window.crypto.getRandomValues(new Uint8Array(16))].map(s=>"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_.,!?$%&*#@".charAt(s%72)).join("").slice(0,10)}const ge={class:"min-h-40dvh bottom-0 w-full bg-light-800 bg-opacity-80 backdrop-blur flex flex-col items-center gap-4 justify-center dark-bg-dark-200 dark-bg-opacity-80 p-8 shadow max-w-180 bottom-0 rounded-xl"},ve={key:0,class:"flex flex-col gap-4 max-w-45ch text-center"},be={class:"text-3xl font-bold"},ye={class:"text-sm flex gap-2 justify-center"},xe={key:1,class:"flex flex-col gap-8 relative pt-8 items-center"},he={class:"text-center max-w-55ch",for:"email"},_e={class:"flex gap-4 flex-col w-full"},we={class:"flex items-center gap-2"},ke=["maxlength"],$e={class:"flex items-center gap-2"},Ce=["maxlength","placeholder"],Se=["disabled"],Ae={__name:"FormMain",setup(s){const{name:n,email:l,isValidEmail:i,isFormOpen:e,grantAccess:d,storedEmail:r,storedName:$,resetEmail:y,isAccessGranted:C,namePlaceholder:S,maxLength:x}=J();return c(),(O,o)=>(m(),p("div",ge,[A(t("button",{class:"i-la-times absolute top-4 right-4 text-2xl hover-opacity-90 opacity-50 transition",onClick:o[0]||(o[0]=u=>e.value=!1)},null,512),[[q,a(e)]]),a(C)?(m(),p("div",ve,[t("div",be,"Hello, "+E(a($))+"!",1),o[7]||(o[7]=t("div",{class:"text-xl"},"You are part of web-musicians community",-1)),t("div",ye,[v(E(a(r)),1),t("span",{class:"opacity-20 hover-opacity-50 transition cursor-pointer",onClick:o[1]||(o[1]=(...u)=>a(y)&&a(y)(...u))},"Log out")])])):(m(),p("div",xe,[t("label",he,[j(O.$slots,"default")]),t("div",_e,[t("label",we,[o[8]||(o[8]=t("div",{class:"p-2 w-24 font-bold text-right"},"E-mail *",-1)),A(t("input",{class:F(["flex-1 p-4 md-p-4 rounded-xl bg-light-200 shadow-md dark-bg-dark-400 flex-1 border-2 border-solid border-opacity-60 dark-border-opacity-40",{"border-red-700 dark-border-red-300":a(l)&&!a(i),"border-green-700 dark-border-green-800":a(l)&&a(i),"border-light-300":!a(l)}]),ref:"target",maxlength:a(x),"onUpdate:modelValue":o[2]||(o[2]=u=>M(l)?l.value=u:null),id:"email",name:"email",type:"email",onKeydown:o[3]||(o[3]=V(u=>a(d)(),["enter"])),placeholder:"your@gmail.com"},null,42,ke),[[z,a(l)]])]),t("label",$e,[o[9]||(o[9]=t("div",{class:"p-2 w-24 font-bold text-right"},"Name",-1)),A(t("input",{class:"flex-1 p-4 md-p-4 rounded-xl bg-light-200 shadow-md dark-bg-dark-400","onUpdate:modelValue":o[4]||(o[4]=u=>M(n)?n.value=u:null),id:"name",maxlength:a(x),name:"name",type:"text",onKeydown:o[5]||(o[5]=V(u=>a(d)(),["enter"])),placeholder:a(S)},null,40,Ce),[[z,a(n)]])])]),t("button",{class:F(["text-sm md-text-md p-4 font-bold md-p-4 rounded-xl shadow-xl hover-shadow-2xl transition -hover-translate-y-2px disabled-opacity-40 active-translate-y-0 active-shadow-md bg-green-400 dark-bg-green-700",{"grayscale-50":!a(i)}]),onClick:o[6]||(o[6]=u=>a(d)()),disabled:!a(i),title:"Your access status will be saved per device and you won't need to enter your e-mail again."},[j(O.$slots,"button",{},()=>[o[10]||(o[10]=v("GET ACCESS"))])],10,Se)]))]))}},Ee={class:"flex items-center gap-1 p-1 bg-light-100 bg-opacity-90 dark-bg-dark-900 dark-bg-opacity-90 w-full justify-center op-70"};function Pe(s,n){return m(),p("div",Ee,n[0]||(n[0]=[t("div",{class:"p-0"},"Curated with â¤ï¸â€ðŸ”¥ by",-1),t("a",{href:"https://shop.playtronica.com",target:"_blank"},"Playtronica ",-1),t("span",null,"& ",-1),t("a",{href:"https://chromatone.center",target:"_blank"},"Chromatone",-1)]))}const Te={},Ne=Q(Te,[["render",Pe]]),Re={key:0,class:"pwa-toast",role:"alertdialog","aria-labelledby":"pwa-message"},Oe={__name:"RegisterSW",setup(s){const n=c(!1);function l(){n.value=!0}async function i(){n.value=!1}return X(async()=>{const{registerSW:e}=await ee(async()=>{const{registerSW:d}=await import("./virtual_pwa-register.BbsVw3cl.js");return{registerSW:d}},__vite__mapDeps([0,1]));e({immediate:!0,onOfflineReady:l,onRegistered(){console.info("Service Worker registered")},onRegisterError(d){console.error("Service Worker registration error!",d)}})}),(e,d)=>n.value?(m(),p("div",Re,[d[0]||(d[0]=t("div",{class:"mb-3",id:"pwa-message"},"App ready to work offline",-1)),t("button",{class:"pwa-cancel",type:"button",onClick:i},"Close")])):B("",!0)}},je={class:"flex flex-col noise items-center relative min-h-100svh"},ze={class:"w-full backdrop-blur-xl fixed bottom-0 bg-light-200 bg-opacity-60 dark-bg-dark-300 dark-bg-opacity-60 z-200"},Ve={class:"flex flex items-center w-full max-w-160 mx-auto gap-2 p-1"},Fe={class:"p-2 flex items-center gap-4",href:"/"},Me=["src"],We={class:"text-lg font-600"},Le={key:0,class:"i-la-sun"},De={key:1,class:"i-tabler-moon-2"},Ue={class:"flex flex-wrap w-full mx-auto flex-auto justify-center pb-20"},Be={__name:"MainLayout",setup(s){const{isFormOpen:n}=J(),{theme:l,site:i,isDark:e}=te();return(d,r)=>{const $=Oe,y=Ne,C=se("content"),S=Ae;return m(),p("div",je,[h($),t("div",ze,[t("div",Ve,[t("a",Fe,[t("img",{class:"w-8",src:a(l).logo,alt:"Web-synths collection logo"},null,8,Me),t("div",We,E(a(i).title),1)]),r[3]||(r[3]=t("div",{class:"flex-1"},null,-1)),t("button",{class:"text-xl",onClick:r[0]||(r[0]=x=>e.value=!a(e)),"aria-label":"Dark mode toggle"},[a(e)?(m(),p("div",De)):(m(),p("div",Le))]),t("button",{class:"p-2 z-2000 cursor-pointer text-2xl","aria-label":"Player profile",onClick:r[1]||(r[1]=x=>n.value=!a(n))},r[2]||(r[2]=[t("div",{class:"i-ph-user-circle-duotone"},null,-1)]))]),h(y,{class:"z-100"})]),t("div",Ue,[h(C,{class:"w-full",id:"content"})]),h(ae,{name:"panel"},{default:_(()=>[a(n)?(m(),oe(S,{key:0,class:"fixed z-1000"},{button:_(()=>r[4]||(r[4]=[v("JOIN THE COMMUNITY")])),notice:_(()=>r[5]||(r[5]=[v("Your access status will be saved per device and you won't need to enter your e-mail again.")])),default:_(()=>[r[6]||(r[6]=v("We are building a community of web-based musicians. Type in your e-mail to instantly gain full access to the collection and receive occasional community updates from us. Stay tuned! "))]),_:1})):B("",!0)]),_:1})])}}},Ye={Layout:Be,enhanceApp({app:s}){}};export{Ye as R,Ae as _,J as u};
